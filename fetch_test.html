<!DOCTYPE html>
<html>
<head>
    <title>Simple HTML Page</title>
</head>
<body>
    <div id="debug"></div>

    <script>
        fetch("http://localhost:8000/windspeed.json")
            .then(response => response.json())
            .then(data => {
                fetch("http://localhost:8000/air-temperature.json")
                    .then(response => response.json())
                    .then(temperatureData => {
                        const debugElement = document.querySelector("#debug");
                        
                        for (let i = 0; i < data.items[0].readings.length; i++) {
                            const windSpeedReading = data.items[0].readings[i];
                            const temperatureReading = temperatureData.items[0].readings[i];

                            const windSpeedStation = data.metadata.stations.find(station => station.id === windSpeedReading.station_id);
                            const temperatureStation = temperatureData.metadata.stations.find(station => station.id === temperatureReading.station_id);

                            const windSpeedValue = windSpeedReading.value;
                            const temperatureValue = temperatureReading.value;

                            const windSpeedStationName = windSpeedStation ? windSpeedStation.name : "Unknown Station";
                            const temperatureStationName = temperatureStation ? temperatureStation.name : "Unknown Station";

                            debugElement.innerHTML += `<p>${windSpeedStationName}:<br>
                                &nbsp&nbsp&nbsp&nbsp WindSpeed: ${windSpeedValue} knots<br>

                                &nbsp&nbsp&nbsp&nbsp    Temperature: ${temperatureValue} degrees</p>`;
                        }
                    })
                    .catch(error => {
                        console.error("Temperature Fetch error:", error);
                    });
            })
            .catch(error => {
                console.error("WindSpeed Fetch error:", error);
            });
    </script>
</body>
